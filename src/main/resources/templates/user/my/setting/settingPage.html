<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
    th:replace="~{user/my/profile/mypageMain :: layout(~{::content}, ~{::extraHead}, 'setting')}">

<head th:fragment="extraHead">
    <title>ê³„ì • ì„¤ì •</title>
    <style type="text/css">
        /* ì„¹ì…˜ ê³µí†µ ìŠ¤íƒ€ì¼ */
        .section {
            margin-bottom: 40px;
            border-bottom: 1px solid #eee;
            padding-bottom: 30px;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }

        .section-title {
            font-size: 18px;
            font-weight: bold;
            color: #333;
        }

        /* ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        .btn-group {
            display: flex;
            gap: 10px;
        }

        .btn {
            padding: 8px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            border: none;
        }

        .btn-cancel {
            background-color: #fff;
            border: 1px solid #ddd;
            color: #555;
        }

        .btn-save {
            background-color: #1dc078;
            color: #fff;
        }

        .btn-save:hover {
            background-color: #18a566;
        }

        .btn-cancel:hover {
            background-color: #f5f5f5;
        }

        /* í¼ í•­ëª© ìŠ¤íƒ€ì¼ */
        .form-row {
            display: flex;
            margin-bottom: 20px;
            align-items: flex-start;
        }

        .form-label {
            width: 100px;
            font-size: 14px;
            color: #555;
            padding-top: 10px;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .form-label .info-icon {
            cursor: help;
            color: #999;
            font-size: 12px;
        }

        .form-content {
            flex: 1;
        }

        /* ì…ë ¥ í•„ë“œ ìŠ¤íƒ€ì¼ */
        .form-input {
            width: 100%;
            max-width: 400px;
            padding: 10px 12px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 14px;
            box-sizing: border-box;
        }

        .form-input:focus {
            outline: none;
            border-color: #1dc078;
        }

        .form-input:disabled {
            background-color: #f9f9f9;
            color: #999;
        }

        /* í”„ë¡œí•„ ì´ë¯¸ì§€ ì˜ì—­ */
        .profile-img-container {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .profile-img-box {
            width: 80px;
            height: 80px;
            border-radius: 8px;
            overflow: hidden;
            background-color: #f5f5f5;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .profile-img-box img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .img-upload-info {
            font-size: 12px;
            color: #888;
        }

        .img-upload-info .highlight {
            color: #1dc078;
        }

        .btn-img-change {
            background-color: #fff;
            border: 1px solid #ddd;
            padding: 6px 12px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 13px;
            color: #555;
            margin-bottom: 8px;
        }

        .btn-img-change:hover {
            background-color: #f5f5f5;
        }

        /* ìê¸°ì†Œê°œ í…ìŠ¤íŠ¸ì˜ì—­ */
        .form-textarea {
            width: 100%;
            max-width: 500px;
            min-height: 100px;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 14px;
            resize: vertical;
            box-sizing: border-box;
        }

        .form-textarea:focus {
            outline: none;
            border-color: #1dc078;
        }

        .textarea-placeholder {
            color: #999;
        }

        /* ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ì˜ì—­ */
        .password-section {
            background-color: #fff;
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 15px;
            max-width: 400px;
        }

        .password-row {
            margin-bottom: 15px;
        }

        .password-row:last-child {
            margin-bottom: 0;
        }

        .password-input {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 14px;
            box-sizing: border-box;
        }

        .password-input:focus {
            outline: none;
            border-color: #1dc078;
        }

        .password-input.error {
            border-color: #ff4444;
        }

        .password-input.success {
            border-color: #1dc078;
        }

        .password-hint {
            font-size: 12px;
            margin-top: 5px;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .password-hint.error {
            color: #ff4444;
        }

        .password-hint.success {
            color: #1dc078;
        }

        .password-hint .icon {
            font-weight: bold;
        }

        /* ë¹„ë°€ë²ˆí˜¸ ìš”êµ¬ì‚¬í•­ ì²´í¬ë¦¬ìŠ¤íŠ¸ */
        .password-requirements {
            margin-top: 10px;
            font-size: 12px;
        }

        .requirement {
            display: flex;
            align-items: center;
            gap: 5px;
            margin-bottom: 3px;
            color: #888;
        }

        .requirement.valid {
            color: #1dc078;
        }

        .requirement.invalid {
            color: #ff4444;
        }

        .requirement .check-icon::before {
            content: "âœ“";
        }

        .requirement .x-icon::before {
            content: "âœ—";
        }

        /* ë¹„ë°€ë²ˆí˜¸ ë²„íŠ¼ ì˜ì—­ */
        .password-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            justify-content: flex-end;
        }

        .btn-find-password {
            background: none;
            border: none;
            color: #888;
            font-size: 12px;
            text-decoration: underline;
            cursor: pointer;
        }

        .btn-small {
            padding: 6px 12px;
            font-size: 13px;
        }

        /* ê³„ì • íƒˆí‡´ ë§í¬ */
        .account-delete {
            text-align: right;
            margin-top: 20px;
        }

        .account-delete a {
            color: #888;
            font-size: 12px;
            text-decoration: none;
        }

        .account-delete a:hover {
            text-decoration: underline;
        }

        /* ì—ë””í„° íˆ´ë°” (ìê¸°ì†Œê°œìš©) */
        .editor-toolbar {
            display: flex;
            gap: 5px;
            padding: 8px;
            border: 1px solid #ddd;
            border-bottom: none;
            border-radius: 5px 5px 0 0;
            background-color: #fafafa;
            max-width: 500px;
            box-sizing: border-box;
        }

        .toolbar-btn {
            background: none;
            border: none;
            padding: 5px 8px;
            cursor: pointer;
            font-size: 14px;
            color: #555;
            border-radius: 3px;
        }

        .toolbar-btn:hover {
            background-color: #eee;
        }

        .editor-container .form-textarea {
            border-radius: 0 0 5px 5px;
        }

        /* ì…ë ¥ í•„ë“œ + ì¸ì¦ ë²„íŠ¼ ì»¨í…Œì´ë„ˆ */
        .input-with-btn {
            display: flex;
            gap: 10px;
            align-items: center;
            max-width: 500px;
        }

        .input-with-btn .form-input {
            flex: 1;
        }

        /* ì¸ì¦ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        .btn-verify {
            padding: 10px 16px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            border: 1px solid #1dc078;
            background-color: #fff;
            color: #1dc078;
            white-space: nowrap;
        }

        .btn-verify:hover {
            background-color: #1dc078;
            color: #fff;
        }

        .btn-verify:disabled {
            border-color: #ccc;
            background-color: #f5f5f5;
            color: #999;
            cursor: not-allowed;
        }

        .btn-verify.verified {
            border-color: #1dc078;
            background-color: #1dc078;
            color: #fff;
            cursor: default;
        }
    </style>
    <script type="text/javascript">
        $(function () {
            // ===============================================
            // ë¹„ë°€ë²ˆí˜¸ ìœ íš¨ì„± ê²€ì‚¬ í•¨ìˆ˜
            // ===============================================
            function validatePassword(password) {
                // ê° ìš”êµ¬ì‚¬í•­ ì²´í¬
                const minLength = password.length >= 6;                                  // 6ì ì´ìƒ
                const maxLength = password.length <= 32;                                 // 32ì ì´í•˜
                const noSpaces = !/\s/.test(password);                                   // ê³µë°± ì—†ìŒ

                return {
                    length: minLength && maxLength,
                    noSpaces: noSpaces,
                    isValid: minLength && maxLength && noSpaces
                };
            }

            // ===============================================
            // í˜„ì¬ ë¹„ë°€ë²ˆí˜¸ ì…ë ¥ ì´ë²¤íŠ¸
            // ===============================================
            $('#currentPassword').on('input', function () {
                const value = $(this).val();
                const $hint = $('#currentPasswordHint');

                if (value.length === 0) {
                    $hint.hide();
                } else {
                    // ì‹¤ì œë¡œëŠ” ì„œë²„ì—ì„œ ê²€ì¦í•´ì•¼ í•˜ì§€ë§Œ, í…ŒìŠ¤íŠ¸ìš©ìœ¼ë¡œ í”„ë¡ íŠ¸ì—ì„œë§Œ ì²˜ë¦¬
                    $hint.hide();
                }
            });

            // ===============================================
            // ìƒˆ ë¹„ë°€ë²ˆí˜¸ ì…ë ¥ ì´ë²¤íŠ¸ (ì‹¤ì‹œê°„ ìœ íš¨ì„± ê²€ì‚¬)
            // ===============================================
            $('#newPassword').on('input', function () {
                const password = $(this).val();
                const result = validatePassword(password);

                // ìš”êµ¬ì‚¬í•­ í‘œì‹œ ì—…ë°ì´íŠ¸
                updateRequirement('#req-specialchar', result.specialChar);
                updateRequirement('#req-length', result.length);
                updateRequirement('#req-nospaces', result.noSpaces);
                updateRequirement('#req-noconsecutive', result.noConsecutive);

                // ë¹„ë°€ë²ˆí˜¸ í™•ì¸ í•„ë“œì™€ ë¹„êµ
                checkPasswordMatch();
            });

            // ===============================================
            // ë¹„ë°€ë²ˆí˜¸ í™•ì¸ ì…ë ¥ ì´ë²¤íŠ¸
            // ===============================================
            $('#confirmPassword').on('input', function () {
                checkPasswordMatch();
            });

            // ===============================================
            // ë¹„ë°€ë²ˆí˜¸ ì¼ì¹˜ í™•ì¸ í•¨ìˆ˜
            // ===============================================
            function checkPasswordMatch() {
                const newPw = $('#newPassword').val();
                const confirmPw = $('#confirmPassword').val();
                const $hint = $('#confirmPasswordHint');
                const $input = $('#confirmPassword');

                if (confirmPw.length === 0) {
                    $hint.hide();
                    $input.removeClass('error success');
                    return;
                }

                if (newPw === confirmPw) {
                    $hint.removeClass('error').addClass('success')
                        .html('<span class="icon">âœ“</span> ìƒˆ ë¹„ë°€ë²ˆí˜¸ì™€ ì¼ì¹˜í•©ë‹ˆë‹¤.').show();
                    $input.removeClass('error').addClass('success');
                } else {
                    $hint.removeClass('success').addClass('error')
                        .html('<span class="icon">âœ—</span> ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.').show();
                    $input.removeClass('success').addClass('error');
                }
            }

            // ===============================================
            // ìš”êµ¬ì‚¬í•­ ìƒíƒœ ì—…ë°ì´íŠ¸ í•¨ìˆ˜
            // ===============================================
            function updateRequirement(selector, isValid) {
                const $el = $(selector);
                if (isValid) {
                    $el.removeClass('invalid').addClass('valid');
                    $el.find('.icon').removeClass('x-icon').addClass('check-icon');
                } else {
                    $el.removeClass('valid').addClass('invalid');
                    $el.find('.icon').removeClass('check-icon').addClass('x-icon');
                }
            }

            // ===============================================
            // í”„ë¡œí•„ ì´ë¯¸ì§€ ë³€ê²½ ë²„íŠ¼ í´ë¦­
            // ===============================================
            $('#btnChangeImage').on('click', function () {
                $('#profileImageInput').click();
            });

            // ===============================================
            // í”„ë¡œí•„ ì´ë¯¸ì§€ ì„ íƒ ì‹œ ë¯¸ë¦¬ë³´ê¸°
            // ===============================================
            $('#profileImageInput').on('change', function (e) {
                const file = e.target.files[0];
                if (file) {
                    // íŒŒì¼ í™•ì¥ì ê²€ì‚¬
                    const validExtensions = ['jpg', 'jpeg', 'png', 'gif'];
                    const extension = file.name.split('.').pop().toLowerCase();

                    if (!validExtensions.includes(extension)) {
                        alert('JPG, GIF, PNG íŒŒì¼ë§Œ ì—…ë¡œë“œ ê°€ëŠ¥í•©ë‹ˆë‹¤.');
                        return;
                    }

                    // íŒŒì¼ í¬ê¸° ê²€ì‚¬ (1MB ì´í•˜)
                    if (file.size > 1024 * 1024) {
                        alert('1MB ì´í•˜ì˜ ì´ë¯¸ì§€ë§Œ ì—…ë¡œë“œ ê°€ëŠ¥í•©ë‹ˆë‹¤.');
                        return;
                    }

                    // ë¯¸ë¦¬ë³´ê¸° í‘œì‹œ
                    const reader = new FileReader();
                    reader.onload = function (e) {
                        $('#profileImage').attr('src', e.target.result);
                    };
                    reader.readAsDataURL(file);
                }
            });

            // ===============================================
            // ìˆ˜ì • ë²„íŠ¼ í´ë¦­ - confirm í™•ì¸ í›„ ì €ì¥
            // ===============================================
            $('#btnSave').on('click', function () {
                // í™•ì¸ì°½ í‘œì‹œ
                if (!confirm('í”„ë¡œí•„ ì •ë³´ë¥¼ ìˆ˜ì •í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                    return;
                }

                // í¼ ë°ì´í„° ìˆ˜ì§‘
                const formData = new FormData();
                formData.append('name', $('#nickname').val());
                formData.append('intro', $('#intro').val());
                formData.append('phone', $('#phone').val());

                // í”„ë¡œí•„ ì´ë¯¸ì§€ íŒŒì¼ì´ ì„ íƒëœ ê²½ìš°
                const imageFile = $('#profileImageInput')[0].files[0];
                if (imageFile) {
                    formData.append('profileImage', imageFile);
                }

                // AJAX ìš”ì²­ìœ¼ë¡œ ì„œë²„ì— ì €ì¥
                $.ajax({
                    url: '/user/my/setting/updateProfile',
                    type: 'POST',
                    data: formData,
                    processData: false,
                    contentType: false,
                    success: function (response) {
                        if (response === 'success') {
                            alert('í”„ë¡œí•„ì´ ì„±ê³µì ìœ¼ë¡œ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.');
                            location.reload();
                        } else {
                            alert('í”„ë¡œí•„ ìˆ˜ì • ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
                        }
                    },
                    error: function (xhr, status, error) {
                        alert('ì„œë²„ í†µì‹  ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
                    }
                });
            });

            // ===============================================
            // ë¹„ë°€ë²ˆí˜¸ ì €ì¥ ë²„íŠ¼ í´ë¦­ (ë¹„ë°€ë²ˆí˜¸ ì„¹ì…˜ ë‚´ë¶€)
            // ===============================================
            $('.password-actions .btn-save').on('click', function () {
                const currentPw = $('#currentPassword').val();
                const newPw = $('#newPassword').val();
                const confirmPw = $('#confirmPassword').val();

                if (!currentPw || !newPw || !confirmPw) {
                    alert('ëª¨ë“  ë¹„ë°€ë²ˆí˜¸ í•„ë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                    return;
                }

                if (newPw !== confirmPw) {
                    alert('ìƒˆ ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.');
                    return;
                }

                $.ajax({
                    url: '/user/my/setting/updatePass',
                    type: 'POST',
                    data: {
                        currentPass: currentPw,
                        newPass: newPw
                    },
                    success: function (response) {
                        if (response === 'success') {
                            alert('ë¹„ë°€ë²ˆí˜¸ê°€ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.');
                            $('#currentPassword').val('');
                            $('#newPassword').val('');
                            $('#confirmPassword').val('');
                        } else if (response === 'pw_mismatch') {
                            alert('í˜„ì¬ ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.');
                        } else {
                            alert('ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
                        }
                    },
                    error: function () {
                        alert('ì„œë²„ í†µì‹  ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
                    }
                });
            });

            // ===============================================
            // ì´ë©”ì¼ ì¸ì¦(ë³€ê²½) ë²„íŠ¼
            // ===============================================
            $('#btnVerifyEmail').on('click', function () {
                const email = $('#email').val();
                if (!email) {
                    alert('ì´ë©”ì¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                    return;
                }

                if (!confirm('ì´ë©”ì¼ì„ ë³€ê²½í•˜ì‹œê² ìŠµë‹ˆê¹Œ? (í…ŒìŠ¤íŠ¸: ì¦‰ì‹œ ë³€ê²½ë¨)')) return;

                $.ajax({
                    url: '/user/my/setting/updateEmail',
                    type: 'POST',
                    data: { email: email },
                    success: function (response) {
                        if (response === 'success') {
                            alert('ì´ë©”ì¼ì´ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.');
                        } else {
                            alert('ì´ë©”ì¼ ë³€ê²½ ì‹¤íŒ¨');
                        }
                    },
                    error: function () {
                        alert('ì˜¤ë¥˜ ë°œìƒ');
                    }
                });
            });

            // ===============================================
            // íœ´ëŒ€í° ì¸ì¦(ë³€ê²½) ë²„íŠ¼
            // ===============================================
            // ===============================================
            // íœ´ëŒ€í° ì¸ì¦(ë³€ê²½) ë²„íŠ¼
            // ===============================================
            let isPhoneVerified = false; // ì¸ì¦ ì™„ë£Œ ì—¬ë¶€

            $('#btnVerifyPhone').on('click', function () {
                const phone = $('#phone').val();
                if (!phone) {
                    alert('íœ´ëŒ€í° ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                    return;
                }

                // SMS ë°œì†¡ ìš”ì²­
                $.ajax({
                    url: '/user/my/setting/sendSms',
                    type: 'GET',
                    data: { phone: phone },
                    success: function (response) {
                        if (response === 'success') {
                            alert('ì¸ì¦ë²ˆí˜¸ê°€ ë°œì†¡ë˜ì—ˆìŠµë‹ˆë‹¤.');
                            $('#smsCodeInputArea').show(); // ì¸ì¦ë²ˆí˜¸ ì…ë ¥ì°½ í‘œì‹œ
                            $('#btnVerifyPhone').text('ì¬ë°œì†¡');
                        } else {
                            alert('ì¸ì¦ë²ˆí˜¸ ë°œì†¡ ì‹¤íŒ¨');
                        }
                    },
                    error: function () {
                        alert('ì˜¤ë¥˜ ë°œìƒ');
                    }
                });
            });

            // ì¸ì¦ë²ˆí˜¸ í™•ì¸ ë²„íŠ¼ í´ë¦­
            $('#btnConfirmCode').on('click', function () {
                const code = $('#smsCode').val();
                if (!code) {
                    alert('ì¸ì¦ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                    return;
                }

                $.ajax({
                    url: '/user/my/setting/verifySms',
                    type: 'POST',
                    data: { code: code },
                    success: function (response) {
                        if (response === 'success') {
                            alert('ì¸ì¦ë˜ì—ˆìŠµë‹ˆë‹¤.');
                            isPhoneVerified = true;
                            $('#smsCodeInputArea').hide();
                            $('#btnVerifyPhone').prop('disabled', true).text('ì¸ì¦ì™„ë£Œ').addClass('verified');
                            $('#phone').prop('readonly', true);

                            // ë°”ë¡œ ì €ì¥ ìš”ì²­ (ì„ íƒì‚¬í•­, ê¸°íšì— ë”°ë¼ ë‹¤ë¦„. ì—¬ê¸°ì„œëŠ” ì €ì¥ ë²„íŠ¼ ëˆŒëŸ¬ì•¼ ìµœì¢… ì €ì¥ë˜ê²Œ í• ì§€, ë°”ë¡œ ì €ì¥í• ì§€ ê²°ì • í•„ìš”)
                            // ì—¬ê¸°ì„œëŠ” "ì €ì¥" ë²„íŠ¼ì„ ëˆŒë €ì„ ë•Œë§Œ ìµœì¢… DB ì—…ë°ì´íŠ¸ê°€ ë˜ë„ë¡ í”Œë˜ê·¸ë§Œ ì„¤ì •í•˜ê±°ë‚˜
                            // í˜¹ì€ ì›ë˜ ë¡œì§ëŒ€ë¡œ ë°”ë¡œ ì—…ë°ì´íŠ¸í•˜ë ¤ë©´ ì•„ë˜ ajax í˜¸ì¶œ
                            updatePhoneNumber();
                        } else {
                            alert('ì¸ì¦ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.');
                        }
                    },
                    error: function () {
                        alert('ì˜¤ë¥˜ ë°œìƒ');
                    }
                });
            });

            function updatePhoneNumber() {
                const phone = $('#phone').val();
                $.ajax({
                    url: '/user/my/setting/updatePhone',
                    type: 'POST',
                    data: { phone: phone },
                    success: function (response) {
                        if (response === 'success') {
                            alert('íœ´ëŒ€í° ë²ˆí˜¸ê°€ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.');
                        } else {
                            alert('ë³€ê²½ ì‹¤íŒ¨');
                        }
                    },
                    error: function () {
                        alert('ì˜¤ë¥˜ ë°œìƒ');
                    }
                });
            }

            // ===============================================
            // ì·¨ì†Œ ë²„íŠ¼ í´ë¦­ - í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨
            // ===============================================
            $('#btnCancel').on('click', function () {
                if (confirm('ë³€ê²½ì‚¬í•­ì„ ì·¨ì†Œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                    location.reload();
                }
            });

        }); // ready
    </script>
</head>

<body>
    <div th:fragment="content">
        <!-- =============================================== -->
        <!-- ë‚´ í”„ë¡œí•„ ì„¹ì…˜ -->
        <!-- =============================================== -->
        <div class="section">
            <div class="section-header">
                <span class="section-title">ë‚´ í”„ë¡œí•„</span>
                <div class="btn-group">
                    <button type="button" class="btn btn-cancel" id="btnCancel">ì·¨ì†Œ</button>
                    <button type="button" class="btn btn-save" id="btnSave">ì €ì¥</button>
                </div>
            </div>

            <!-- í”„ë¡œí•„ ì´ë¯¸ì§€ -->
            <div class="form-row">
                <div class="form-label">ì´ë¯¸ì§€</div>
                <div class="form-content">
                    <div class="profile-img-container">
                        <div class="profile-img-box">
                            <img id="profileImage" th:src="@{/upload/profile/${user.profileImg}}" alt="í”„ë¡œí•„ ì´ë¯¸ì§€">
                        </div>
                        <div>
                            <button type="button" class="btn-img-change" id="btnChangeImage">ë³€ê²½</button>
                            <input type="file" id="profileImageInput" accept="image/*" style="display:none;">
                            <div class="img-upload-info">
                                <span class="highlight">âœ“</span> JPG, GIF, PNG í™•ì¥ì<br>
                                <span class="highlight">âœ“</span> 1MB ì´í•˜ì˜ ì´ë¯¸ì§€
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ë‹‰ë„¤ì„ -->
            <div class="form-row">
                <div class="form-label">ë‹‰ë„¤ì„</div>
                <div class="form-content">
                    <input type="text" class="form-input" id="nickname"
                        th:value="${user.name != null ? user.name : 'Devil Site'}" value="Devil Site"
                        placeholder="ë‹‰ë„¤ì„ì„ ì…ë ¥í•˜ì„¸ìš”">
                </div>
            </div>

            <!-- ì•„ì´ë”” (ìˆ˜ì • ë¶ˆê°€) -->
            <div class="form-row">
                <div class="form-label">ì•„ì´ë””</div>
                <div class="form-content">
                    <input type="text" class="form-input" id="userId"
                        th:value="${user.id != null ? user.id : 'ljw0232'}" value="ljw0232" disabled>
                </div>
            </div>

            <!-- ìê¸°ì†Œê°œ -->
            <div class="form-row">
                <div class="form-label">ìê¸°ì†Œê°œ</div>
                <div class="form-content">
                    <div class="editor-container">
                        <!-- ê°„ë‹¨í•œ ì—ë””í„° íˆ´ë°” -->
                        <div class="editor-toolbar">
                            <button type="button" class="toolbar-btn" title="êµµê²Œ"><b>B</b></button>
                            <button type="button" class="toolbar-btn" title="ê¸°ìš¸ì„"><i>I</i></button>
                            <button type="button" class="toolbar-btn" title="ë°‘ì¤„"><u>U</u></button>
                            <button type="button" class="toolbar-btn" title="ì·¨ì†Œì„ "><s>S</s></button>
                            <button type="button" class="toolbar-btn" title="ì½”ë“œ">&lt;/&gt;</button>
                            <button type="button" class="toolbar-btn" title="ì´ë¯¸ì§€">ğŸ–¼</button>
                            <button type="button" class="toolbar-btn" title="ë§í¬">ğŸ”—</button>
                            <button type="button" class="toolbar-btn" title="ì¸ìš©">ââ</button>
                            <button type="button" class="toolbar-btn" title="êµ¬ë¶„ì„ ">â€”</button>
                            <button type="button" class="toolbar-btn" title="ë³¸ë¬¸">ë³¸ë¬¸</button>
                        </div>
                        <textarea class="form-textarea" id="intro" placeholder="ë‚˜ë§Œì˜ ìŠ¤í‚¬, ê¹ƒí—ˆë¸Œ ë§í¬ ë“±ìœ¼ë¡œ ì†Œê°œê¸€ì„ ì±„ì›Œë³´ì„¸ìš”."
                            th:text="${user.intro}"></textarea>
                    </div>
                </div>
            </div>
        </div>

        <!-- =============================================== -->
        <!-- ê¸°ë³¸ ì •ë³´ ì„¹ì…˜ -->
        <!-- =============================================== -->
        <div class="section">
            <div class="section-header">
                <span class="section-title">ê¸°ë³¸ ì •ë³´</span>
            </div>

            <!-- ì´ë©”ì¼ -->
            <div class="form-row">
                <div class="form-label">
                    ì´ë©”ì¼
                    <span class="info-icon" title="ì´ë©”ì¼ ì¸ì¦ì´ í•„ìš”í•©ë‹ˆë‹¤">â“˜</span>
                </div>
                <div class="form-content">
                    <div class="input-with-btn">
                        <input type="email" class="form-input" id="email"
                            th:value="${user.email != null ? user.email : 'ljw0232@gmail.com'}"
                            value="ljw0232@gmail.com">
                        <button type="button" class="btn-verify" id="btnVerifyEmail">ì¸ì¦</button>
                    </div>
                </div>
            </div>


            <!-- ë¹„ë°€ë²ˆí˜¸ -->
            <div class="form-row">
                <div class="form-label">ë¹„ë°€ë²ˆí˜¸</div>
                <div class="form-content">
                    <div class="password-section">
                        <!-- í˜„ì¬ ë¹„ë°€ë²ˆí˜¸ -->
                        <div class="password-row">
                            <input type="password" class="password-input" id="currentPassword" placeholder="í˜„ì¬ ë¹„ë°€ë²ˆí˜¸">
                            <div class="password-hint error" id="currentPasswordHint" style="display:none;">
                                <span class="icon">âœ—</span> ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
                            </div>
                        </div>

                        <!-- ìƒˆ ë¹„ë°€ë²ˆí˜¸ -->
                        <div class="password-row">
                            <input type="password" class="password-input" id="newPassword" placeholder="ìƒˆ ë¹„ë°€ë²ˆí˜¸">
                            <!-- ë¹„ë°€ë²ˆí˜¸ ìš”êµ¬ì‚¬í•­ ì²´í¬ë¦¬ìŠ¤íŠ¸ -->
                            <div class="password-requirements">
                                <div class="requirement" id="req-specialchar">
                                    <span class="icon check-icon"></span>
                                    ì˜ë¬¸/ìˆ«ì/íŠ¹ìˆ˜ë¬¸ì ì¤‘, 2ê°€ì§€ ì´ìƒ í¬í•¨
                                </div>
                                <div class="requirement" id="req-length">
                                    <span class="icon check-icon"></span>
                                    8ì ì´ìƒ 32ì ì´í•˜ ì…ë ¥ (ê³µë°± ì œì™¸)
                                </div>
                                <div class="requirement" id="req-noconsecutive">
                                    <span class="icon check-icon"></span>
                                    ì—°ì† 3ì ì´ìƒ ë™ì¼í•œ ë¬¸ì/ìˆ«ì ì œì™¸
                                </div>
                            </div>
                        </div>

                        <!-- ë¹„ë°€ë²ˆí˜¸ í™•ì¸ -->
                        <div class="password-row">
                            <input type="password" class="password-input" id="confirmPassword" placeholder="ìƒˆ ë¹„ë°€ë²ˆí˜¸ í™•ì¸">
                            <div class="password-hint success" id="confirmPasswordHint" style="display:none;">
                                <span class="icon">âœ“</span> ìƒˆ ë¹„ë°€ë²ˆí˜¸ì™€ ì¼ì¹˜í•©ë‹ˆë‹¤.
                            </div>
                        </div>

                        <!-- ë¹„ë°€ë²ˆí˜¸ ë²„íŠ¼ -->
                        <div class="password-actions">
                            <button type="button" class="btn-find-password">ë¹„ë°€ë²ˆí˜¸ ì°¾ê¸°</button>
                            <button type="button" class="btn btn-save btn-small">ì €ì¥</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- íœ´ëŒ€í° -->
            <div class="form-row">
                <div class="form-label">íœ´ëŒ€í°</div>
                <div class="form-content">
                    <div class="input-with-btn">
                        <input type="text" class="form-input" id="phone"
                            th:value="${user.phone != null ? user.phone : '010-1234-5678'}" placeholder="íœ´ëŒ€í° ë²ˆí˜¸ ì…ë ¥">
                        <button type="button" class="btn-verify" id="btnVerifyPhone">ì¸ì¦ë²ˆí˜¸</button>
                    </div>
                    <!-- ì¸ì¦ë²ˆí˜¸ ì…ë ¥ ì˜ì—­ (ì´ˆê¸°ì—ëŠ” ìˆ¨ê¹€) -->
                    <div class="input-with-btn" id="smsCodeInputArea" style="display:none; margin-top: 10px;">
                        <input type="text" class="form-input" id="smsCode" placeholder="ì¸ì¦ë²ˆí˜¸ 6ìë¦¬">
                        <button type="button" class="btn-verify" id="btnConfirmCode">í™•ì¸</button>
                    </div>
                </div>
            </div>


            <!-- ê³„ì • íƒˆí‡´ -->
            <div class="account-delete">
                <a href="#">ê³„ì • íƒˆí‡´</a>
            </div>
        </div>
    </div>
</body>

</html>