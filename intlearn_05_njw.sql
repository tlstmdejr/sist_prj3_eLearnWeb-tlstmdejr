--------------------------------------------------------
-- [1. 초기화]
--------------------------------------------------------
-- 시퀀스/테이블 삭제 (기존 유지)
DROP SEQUENCE SEQ_MANAGER_ID;
DROP SEQUENCE SEQ_CATEGORY_ID;
DROP SEQUENCE SEQ_INSTRUCTOR_ID;
DROP SEQUENCE SEQ_USERS_ID;
DROP SEQUENCE SEQ_LECTURE_ID;
DROP SEQUENCE SEQ_RELATIVE_SKILL_ID;
DROP SEQUENCE SEQ_CHAPTER_ID;
DROP SEQUENCE SEQ_MY_CART_ID;
DROP SEQUENCE SEQ_PAYMENT_DETAIL_ID;
DROP SEQUENCE SEQ_PAYMENT_ID;
DROP SEQUENCE SEQ_MY_LECTURE_ID;
DROP SEQUENCE SEQ_MY_CHAPTER_ID;
DROP SEQUENCE SEQ_QUESTION_ID;
DROP SEQUENCE SEQ_REVIEW_ID;
DROP SEQUENCE SEQ_TEST_ID;
DROP SEQUENCE SEQ_TEST_QUESTION_ID;
DROP SEQUENCE SEQ_MY_TEST_ID;
DROP SEQUENCE SEQ_ATTENDANCE_ID;
DROP SEQUENCE SEQ_ANNOUNCEMENT_ID;
DROP SEQUENCE SEQ_TRANS_ID;

DROP TABLE TEST_EXAMINATION CASCADE CONSTRAINTS;
DROP TABLE TEST_QUESTION CASCADE CONSTRAINTS;
DROP TABLE MY_TEST CASCADE CONSTRAINTS;
DROP TABLE TEST CASCADE CONSTRAINTS;
DROP TABLE REVIEW CASCADE CONSTRAINTS;
DROP TABLE QUESTION CASCADE CONSTRAINTS;
DROP TABLE MY_CHAPTER CASCADE CONSTRAINTS;
DROP TABLE MY_CART CASCADE CONSTRAINTS;
DROP TABLE RELATIVE_SKILL CASCADE CONSTRAINTS;
DROP TABLE MY_LECTURE CASCADE CONSTRAINTS;
DROP TABLE ATTENDANCE CASCADE CONSTRAINTS;
DROP TABLE ANNOUNCEMENT CASCADE CONSTRAINTS;
DROP TABLE PAYMENT_DETAIL2 CASCADE CONSTRAINTS;
DROP TABLE PAYMENT CASCADE CONSTRAINTS;
DROP TABLE PAYMENT_DETAIL CASCADE CONSTRAINTS;
DROP TABLE CHAPTER CASCADE CONSTRAINTS;
DROP TABLE TRANSMISSION_HISTORY CASCADE CONSTRAINTS;
DROP TABLE LECTURE CASCADE CONSTRAINTS;
DROP TABLE USERS CASCADE CONSTRAINTS;
DROP TABLE INSTRUCTOR CASCADE CONSTRAINTS;
DROP TABLE CATEGORY CASCADE CONSTRAINTS;
DROP TABLE MANAGER CASCADE CONSTRAINTS;

-- 시퀀스 생성
CREATE SEQUENCE SEQ_RELATIVE_SKILL_ID START WITH 1 INCREMENT BY 1;
CREATE SEQUENCE SEQ_ATTENDANCE_ID START WITH 1 INCREMENT BY 1;
CREATE SEQUENCE SEQ_ANNOUNCEMENT_ID START WITH 1 INCREMENT BY 1;
CREATE SEQUENCE SEQ_TRANS_ID START WITH 1 INCREMENT BY 1;
CREATE SEQUENCE SEQ_MANAGER_ID START WITH 1 INCREMENT BY 1;
CREATE SEQUENCE SEQ_CATEGORY_ID START WITH 1 INCREMENT BY 1;
CREATE SEQUENCE SEQ_INSTRUCTOR_ID START WITH 1 INCREMENT BY 1;
CREATE SEQUENCE SEQ_USERS_ID START WITH 1 INCREMENT BY 1;
CREATE SEQUENCE SEQ_LECTURE_ID START WITH 1 INCREMENT BY 1;
CREATE SEQUENCE SEQ_CHAPTER_ID START WITH 1 INCREMENT BY 1;
CREATE SEQUENCE SEQ_MY_CART_ID START WITH 1 INCREMENT BY 1;
CREATE SEQUENCE SEQ_PAYMENT_DETAIL_ID START WITH 1 INCREMENT BY 1;
CREATE SEQUENCE SEQ_PAYMENT_ID START WITH 1 INCREMENT BY 1;
CREATE SEQUENCE SEQ_MY_LECTURE_ID START WITH 1 INCREMENT BY 1;
CREATE SEQUENCE SEQ_MY_CHAPTER_ID START WITH 1 INCREMENT BY 1;
CREATE SEQUENCE SEQ_QUESTION_ID START WITH 1 INCREMENT BY 1;
CREATE SEQUENCE SEQ_REVIEW_ID START WITH 1 INCREMENT BY 1;
CREATE SEQUENCE SEQ_TEST_ID START WITH 1 INCREMENT BY 1;
CREATE SEQUENCE SEQ_TEST_QUESTION_ID START WITH 1 INCREMENT BY 1;
CREATE SEQUENCE SEQ_MY_TEST_ID START WITH 1 INCREMENT BY 1;

-- 테이블 생성 (기존 유지)
CREATE TABLE MANAGER (ADM_ID VARCHAR2(30) PRIMARY KEY, PASSWORD VARCHAR2(20) NOT NULL);
CREATE TABLE CATEGORY (CAT_ID VARCHAR2(30) PRIMARY KEY, NAME VARCHAR2(50) NOT NULL);
CREATE TABLE INSTRUCTOR (INST_ID VARCHAR2(30) PRIMARY KEY, PASSWORD VARCHAR2(100) NOT NULL, BIRTH DATE NOT NULL, EMAIL VARCHAR2(100) NOT NULL, NAME VARCHAR2(100) NOT NULL, PHONE VARCHAR2(11) NOT NULL, PROFILE VARCHAR2(30) NOT NULL, ACTIVATION NUMBER(1) NOT NULL, APPROVAL NUMBER(1) NOT NULL, REGDATE DATE DEFAULT SYSDATE NOT NULL, REGIP VARCHAR2(30) NOT NULL);
CREATE TABLE USERS (USER_ID VARCHAR2(30) PRIMARY KEY, PASSWORD VARCHAR2(100) NOT NULL, EMAIL VARCHAR2(100) NOT NULL, INTRO VARCHAR2(1000), NAME VARCHAR2(100) NOT NULL, PHONE VARCHAR2(11) NOT NULL, ACTIVATION number(1) NOT NULL, BIRTH DATE NOT NULL, PROFILE VARCHAR2(30) NOT NULL, REGDATE DATE DEFAULT SYSDATE NOT NULL, REGIP VARCHAR2(30) NOT NULL);
CREATE TABLE LECTURE (LECT_ID VARCHAR2(30) PRIMARY KEY, NAME VARCHAR2(100) NOT NULL, PRICE NUMBER(6) NOT NULL, SHORTINT VARCHAR2(100) NOT NULL, INTRO CLOB NOT NULL, COUNT NUMBER(2) NOT NULL, LENGTH NUMBER(3) NOT NULL, AVAILABILITY NUMBER(1) NOT NULL, CAT_ID VARCHAR2(30) REFERENCES CATEGORY(CAT_ID), INST_ID VARCHAR2(30) REFERENCES INSTRUCTOR(INST_ID), THUMBNAIL VARCHAR2(30) NOT NULL, USERCOUNT NUMBER(5) NOT NULL, REGDATE DATE DEFAULT SYSDATE NOT NULL, REGIP VARCHAR2(30) NOT NULL, APPROVAL NUMBER(1) NOT NULL, REJECT_REASON VARCHAR2(1000));
CREATE TABLE RELATIVE_SKILL (SKILL_ID number(4) PRIMARY KEY, NAME VARCHAR2(50) NOT NULL, LECT_ID VARCHAR2(30) REFERENCES LECTURE(LECT_ID));
CREATE TABLE CHAPTER (CHPTR_ID VARCHAR2(30) PRIMARY KEY, NUM NUMBER(2) NOT NULL, NAME VARCHAR2(50) NOT NULL, LENGTH NUMBER(3) NOT NULL, DOC VARCHAR2(30), DOCREGDATE DATE, VIDEO VARCHAR2(100) NOT NULL, REGDATE DATE DEFAULT SYSDATE NOT NULL, LECT_ID VARCHAR2(30) REFERENCES LECTURE(LECT_ID) NOT NULL);
CREATE TABLE MY_CART (MYCART_ID VARCHAR2(30) PRIMARY KEY, USER_ID VARCHAR2(30) REFERENCES USERS(USER_ID), LECT_ID VARCHAR2(30) REFERENCES LECTURE(LECT_ID));
CREATE TABLE PAYMENT_DETAIL (PAYREC_ID VARCHAR2(30) PRIMARY KEY, USER_ID VARCHAR2(30) REFERENCES USERS(USER_ID));
CREATE TABLE PAYMENT (PAY_ID VARCHAR2(30) PRIMARY KEY, PAYREC_ID VARCHAR2(30) NOT NULL REFERENCES PAYMENT_DETAIL(PAYREC_ID), METHOD VARCHAR2(30) NOT NULL, TIME DATE DEFAULT SYSDATE, PRICE NUMBER(7) NOT NULL, STATE NUMBER(1) NOT NULL);
CREATE TABLE MY_LECTURE (MYLECT_ID VARCHAR2(30) PRIMARY KEY, LECT_ID VARCHAR2(30) REFERENCES LECTURE(LECT_ID), USER_ID VARCHAR2(30) REFERENCES USERS(USER_ID), REGDATE DATE DEFAULT SYSDATE);
CREATE TABLE MY_CHAPTER (MY_CHAPTER_ID VARCHAR2(30) PRIMARY KEY, CHPTR_ID VARCHAR2(30) REFERENCES CHAPTER(CHPTR_ID), USER_ID VARCHAR2(30) REFERENCES USERS(USER_ID), LASTDATE DATE, PROGRESS NUMBER(3) NOT NULL, PROGTIME NUMBER(5) NOT NULL, STATE NUMBER(1) NOT NULL);
CREATE TABLE QUESTION (QUESTION_ID VARCHAR2(30) PRIMARY KEY, LECT_ID VARCHAR2(30) REFERENCES LECTURE(LECT_ID), USER_ID VARCHAR2(30) REFERENCES USERS(USER_ID), TITLE VARCHAR2(100) NOT NULL, CONTENT VARCHAR2(1000) NOT NULL, VIEWS NUMBER(5) DEFAULT 0 NOT NULL, REGDATE DATE DEFAULT SYSDATE NOT NULL, REGIP VARCHAR2(30) NOT NULL, ANS VARCHAR2(1000), ANSDATE DATE, ANSIP VARCHAR2(30));
CREATE TABLE REVIEW (REVIEW_ID VARCHAR2(30) PRIMARY KEY, SCORE NUMBER(1) NOT NULL, CONTENT VARCHAR2(1000) NOT NULL, REGDATE DATE DEFAULT SYSDATE NOT NULL, REGIP VARCHAR2(30) NOT NULL, LECT_ID VARCHAR2(30) REFERENCES LECTURE(LECT_ID), USER_ID VARCHAR2(30) REFERENCES USERS(USER_ID));
CREATE TABLE TEST (TEST_ID VARCHAR2(30) PRIMARY KEY, LECT_ID VARCHAR2(30) REFERENCES LECTURE(LECT_ID));
CREATE TABLE TEST_QUESTION (TEST_Q_ID VARCHAR2(30) PRIMARY KEY, TEST_ID VARCHAR2(30) REFERENCES TEST(TEST_ID), NUM NUMBER(1) NOT NULL, CONTENT VARCHAR2(300) NOT NULL, OPT1 VARCHAR2(200) NOT NULL, OPT2 VARCHAR2(200) NOT NULL, OPT3 VARCHAR2(200) NOT NULL, OPT4 VARCHAR2(200) NOT NULL, ANS NUMBER(1) NOT NULL, EXP VARCHAR2(300));
CREATE TABLE MY_TEST (MY_TEST_ID VARCHAR2(30) PRIMARY KEY, TEST_ID VARCHAR2(30) REFERENCES TEST(TEST_ID) NOT NULL, USER_ID VARCHAR2(30) REFERENCES USERS(USER_ID) NOT NULL, SCORE NUMBER(3), TAKEDATE DATE DEFAULT SYSDATE, IP VARCHAR2(30));
CREATE TABLE TEST_EXAMINATION (TEST_Q_NUM NUMBER(1) , MY_TEST_ID VARCHAR2(30) REFERENCES MY_TEST(MY_TEST_ID), CHOICE NUMBER(1) NOT NULL, PRIMARY KEY (MY_TEST_ID, TEST_Q_NUM));
CREATE TABLE ATTENDANCE (ATTEND_ID NUMBER(4) PRIMARY KEY, USER_ID VARCHAR2(30) REFERENCES USERS(USER_ID), ATTDATE DATE DEFAULT SYSDATE NOT NULL);
CREATE TABLE ANNOUNCEMENT (ANN_ID NUMBER(4) PRIMARY KEY, TITLE VARCHAR2(100) NOT NULL, CONTENT VARCHAR2(1000) NOT NULL, VIEWS NUMBER(5) DEFAULT 0, REGDATE DATE DEFAULT SYSDATE, REGIP VARCHAR2(30) NOT NULL, ADM_ID VARCHAR2(30) REFERENCES MANAGER(ADM_ID));
CREATE TABLE TRANSMISSION_HISTORY (TRANS_ID NUMBER(4) PRIMARY KEY, PHONE VARCHAR2(11), EMAIL VARCHAR2(30), TRANSDATE DATE DEFAULT SYSDATE NOT NULL);
CREATE TABLE PAYMENT_DETAIL2 (LECT_ID VARCHAR2(30) REFERENCES LECTURE(LECT_ID), PAYREC_ID VARCHAR2(30) REFERENCES PAYMENT_DETAIL(PAYREC_ID), PRIMARY KEY (LECT_ID, PAYREC_ID));


--------------------------------------------------------
-- [3. 데이터 삽입]
--------------------------------------------------------

INSERT INTO MANAGER VALUES ('admin' || SEQ_MANAGER_ID.NEXTVAL, 'pass01');
INSERT INTO MANAGER VALUES ('admin' || SEQ_MANAGER_ID.NEXTVAL, 'pass02');
INSERT INTO MANAGER VALUES ('admin' || SEQ_MANAGER_ID.NEXTVAL, 'pass03');
INSERT INTO MANAGER VALUES ('admin' || SEQ_MANAGER_ID.NEXTVAL, 'pass04');
INSERT INTO MANAGER VALUES ('admin' || SEQ_MANAGER_ID.NEXTVAL, 'pass05');
INSERT INTO MANAGER VALUES ('admin' || SEQ_MANAGER_ID.NEXTVAL, 'pass06');
INSERT INTO MANAGER VALUES ('admin' || SEQ_MANAGER_ID.NEXTVAL, 'pass07');
INSERT INTO MANAGER VALUES ('admin' || SEQ_MANAGER_ID.NEXTVAL, 'pass08');
INSERT INTO MANAGER VALUES ('admin' || SEQ_MANAGER_ID.NEXTVAL, 'pass09');
INSERT INTO MANAGER VALUES ('admin' || SEQ_MANAGER_ID.NEXTVAL, 'pass10');



INSERT INTO CATEGORY VALUES ('CAT' || SEQ_CATEGORY_ID.NEXTVAL, '데이터베이스');
INSERT INTO CATEGORY VALUES ('CAT' || SEQ_CATEGORY_ID.NEXTVAL, '웹 프로그래밍');
INSERT INTO CATEGORY VALUES ('CAT' || SEQ_CATEGORY_ID.NEXTVAL, '인공지능');
INSERT INTO CATEGORY VALUES ('CAT' || SEQ_CATEGORY_ID.NEXTVAL, '모바일 앱');
INSERT INTO CATEGORY VALUES ('CAT' || SEQ_CATEGORY_ID.NEXTVAL, '게임 개발');
INSERT INTO CATEGORY VALUES ('CAT' || SEQ_CATEGORY_ID.NEXTVAL, '보안');
INSERT INTO CATEGORY VALUES ('CAT' || SEQ_CATEGORY_ID.NEXTVAL, '데이터 분석');
INSERT INTO CATEGORY VALUES ('CAT' || SEQ_CATEGORY_ID.NEXTVAL, '클라우드');
INSERT INTO CATEGORY VALUES ('CAT' || SEQ_CATEGORY_ID.NEXTVAL, '디자인');
INSERT INTO CATEGORY VALUES ('CAT' || SEQ_CATEGORY_ID.NEXTVAL, '교양');

INSERT INTO INSTRUCTOR VALUES ('inst' || SEQ_INSTRUCTOR_ID.NEXTVAL, 'p1', TO_DATE('1980-01-01','YYYY-MM-DD'), 'i1@test.com', '강사1', '01011110001', 'profile.jpg', 1, 1, TO_DATE('2005-01-01','YYYY-MM-DD'), '0.0.0.2');
INSERT INTO INSTRUCTOR VALUES ('inst' || SEQ_INSTRUCTOR_ID.NEXTVAL, 'p2', TO_DATE('1981-01-01','YYYY-MM-DD'), 'i2@test.com', '강사2', '01011110002', 'profile.jpg', 1, 1, TO_DATE('2026-01-29','YYYY-MM-DD'), '0.0.8.0');
INSERT INTO INSTRUCTOR VALUES ('inst' || SEQ_INSTRUCTOR_ID.NEXTVAL, 'p3', TO_DATE('1982-01-01','YYYY-MM-DD'), 'i3@test.com', '강사3', '01011110003', 'profile.jpg', 1, 1, TO_DATE('2026-01-29','YYYY-MM-DD'), '0.0.0.5');
INSERT INTO INSTRUCTOR VALUES ('inst' || SEQ_INSTRUCTOR_ID.NEXTVAL, 'p4', TO_DATE('1983-01-01','YYYY-MM-DD'), 'i4@test.com', '강사4', '01011110004', 'profile.jpg', 1, 1, TO_DATE('2022-04-07','YYYY-MM-DD'), '0.0.0.7');
INSERT INTO INSTRUCTOR VALUES ('inst' || SEQ_INSTRUCTOR_ID.NEXTVAL, 'p5', TO_DATE('1984-01-01','YYYY-MM-DD'), 'i5@test.com', '강사5', '01011110005', 'profile.jpg', 1, 1, TO_DATE('2026-01-29','YYYY-MM-DD'), '0.0.0.3');
INSERT INTO INSTRUCTOR VALUES ('inst' || SEQ_INSTRUCTOR_ID.NEXTVAL, 'p6', TO_DATE('1985-01-01','YYYY-MM-DD'), 'i6@test.com', '강사6', '01011110006', 'profile.jpg', 1, 1, TO_DATE('2017-04-01','YYYY-MM-DD'), '0.0.0.2');
INSERT INTO INSTRUCTOR VALUES ('inst' || SEQ_INSTRUCTOR_ID.NEXTVAL, 'p7', TO_DATE('1986-01-01','YYYY-MM-DD'), 'i7@test.com', '강사7', '01011110007', 'profile.jpg', 1, 1, TO_DATE('2005-01-01','YYYY-MM-DD'), '0.0.0.4');
INSERT INTO INSTRUCTOR VALUES ('inst' || SEQ_INSTRUCTOR_ID.NEXTVAL, 'p8', TO_DATE('1987-01-01','YYYY-MM-DD'), 'i8@test.com', '강사8', '01011110008', 'profile.jpg', 1, 1, TO_DATE('2017-04-01','YYYY-MM-DD'), '0.0.0.5');
INSERT INTO INSTRUCTOR VALUES ('inst' || SEQ_INSTRUCTOR_ID.NEXTVAL, 'p9', TO_DATE('1988-01-01','YYYY-MM-DD'), 'i9@test.com', '강사9', '01011110009', 'profile.jpg', 0, 1, TO_DATE('2005-01-01','YYYY-MM-DD'), '0.4.0.0'); -- 비활성
INSERT INTO INSTRUCTOR VALUES ('inst' || SEQ_INSTRUCTOR_ID.NEXTVAL, 'p10', TO_DATE('1989-01-01','YYYY-MM-DD'), 'i10@test.com', '강사10', '01011110010', 'profile.jpg', 1, 1, TO_DATE('2017-04-01','YYYY-MM-DD'), '0.0.0.1');

INSERT INTO USERS VALUES ('user' || SEQ_USERS_ID.NEXTVAL, 'u1', 'u1@naver.com','멋쟁이', '이정우', '01022220001', 1, TO_DATE('1995-01-01','YYYY-MM-DD'),'profile.jpg', TO_DATE('2005-01-01','YYYY-MM-DD'),'0.4.0.1');
INSERT INTO USERS VALUES ('user' || SEQ_USERS_ID.NEXTVAL, 'u2', 'u2@naver.com','진짜멋쟁이', '남지우', '01022220001', 1, TO_DATE('1995-01-01','YYYY-MM-DD'),'profile.jpg', TO_DATE('2005-01-01','YYYY-MM-DD'),'0.4.0.1');
INSERT INTO USERS VALUES ('user' || SEQ_USERS_ID.NEXTVAL, 'u3', 'u3@naver.com','레알멋쟁이', '이지원', '01022220003', 1, TO_DATE('1997-01-01','YYYY-MM-DD'),'profile.jpg', TO_DATE('2026-01-29','YYYY-MM-DD'),'0.0.5.1');
INSERT INTO USERS VALUES ('user' || SEQ_USERS_ID.NEXTVAL, 'u4', 'u4@naver.com', '자바를 좋아하는 학생','신승덕', '01022220004', 1, TO_DATE('1998-01-01','YYYY-MM-DD'),'profile.jpg', TO_DATE('2026-01-29','YYYY-MM-DD'),'0.1.0.1');
INSERT INTO USERS VALUES ('user' || SEQ_USERS_ID.NEXTVAL, 'u5', 'u5@naver.com','노캡으로 멋쟁이', '최승준', '01022220005', 1, TO_DATE('1999-01-01','YYYY-MM-DD'),'profile.jpg', TO_DATE('2022-04-07','YYYY-MM-DD'),'0.4.0.1');
INSERT INTO USERS VALUES ('user' || SEQ_USERS_ID.NEXTVAL, 'u6', 'u6@naver.com','겁쟁이', '버즈', '01022220006', 1, TO_DATE('2000-01-01','YYYY-MM-DD'),'profile.jpg', TO_DATE('2021-04-05','YYYY-MM-DD'),'0.0.2.1');
INSERT INTO USERS VALUES ('user' || SEQ_USERS_ID.NEXTVAL, 'u7', 'u7@naver.com','집가고싶은 학생', '나경원', '01022220007', 1, TO_DATE('2001-01-01','YYYY-MM-DD'),'profile.jpg', TO_DATE('1951-01-09','YYYY-MM-DD'),'0.7.0.1');
INSERT INTO USERS VALUES ('user' || SEQ_USERS_ID.NEXTVAL, 'u8', 'u8@naver.com','공부하기싫은 학생', '윤자빈', '01022220008', 1, TO_DATE('2002-01-01','YYYY-MM-DD'),'profile.jpg', TO_DATE('2009-05-21','YYYY-MM-DD'),'0.0.5.1');
INSERT INTO USERS VALUES ('user' || SEQ_USERS_ID.NEXTVAL, 'u9', 'u9@naver.com','생물학적 남성', '박상현', '01022220009', 1, TO_DATE('2003-01-01','YYYY-MM-DD'),'profile.jpg', TO_DATE('2017-04-01','YYYY-MM-DD'),'0.4.0.1');
INSERT INTO USERS VALUES ('user' || SEQ_USERS_ID.NEXTVAL, 'u10', 'u10@naver.com','생물학적 중성', '고준서', '01022220010', 0, TO_DATE('2004-01-01','YYYY-MM-DD'),'profile.jpg', TO_DATE('2015-04-01','YYYY-MM-DD'),'0.0.0.7');

INSERT INTO LECTURE VALUES ('L' || SEQ_LECTURE_ID.NEXTVAL, 'SQL 입문', 30000, '기초부터', '강의설명1', 10, 100, 1, 'CAT1', 'inst1', 't1.jpg', 10, TO_DATE('2005-01-01','YYYY-MM-DD'), '0.4.0.1', 1, NULL);
INSERT INTO LECTURE VALUES ('L' || SEQ_LECTURE_ID.NEXTVAL, 'Java 마스터', 50000, '심화과정', '강의설명2', 12, 120, 1, 'CAT2', 'inst2', 't2.jpg', 15, TO_DATE('2026-01-29','YYYY-MM-DD'), '0.0.5.1', 1, NULL);
INSERT INTO LECTURE VALUES ('L' || SEQ_LECTURE_ID.NEXTVAL, 'AI 첫걸음', 40000, '딥러닝 기초', '강의설명3', 15, 150, 1, 'CAT3', 'inst3', 't3.jpg', 12, TO_DATE('2022-04-07','YYYY-MM-DD'), '0.4.0.1', 1, NULL);
INSERT INTO LECTURE VALUES ('L' || SEQ_LECTURE_ID.NEXTVAL, '앱 개발', 55000, '플러터 실습', '강의설명4', 20, 200, 1, 'CAT4', 'inst4', 't4.jpg', 0, TO_DATE('2015-04-01','YYYY-MM-DD'), '0.0.0.7', 1, NULL);
INSERT INTO LECTURE VALUES ('L' || SEQ_LECTURE_ID.NEXTVAL, 'Unity 게임', 60000, '3D 게임제작', '강의설명5', 18, 180, 1, 'CAT5', 'inst5', 't5.jpg', 0, TO_DATE('2017-04-01','YYYY-MM-DD'), '0.4.0.1', 0, '비싸서 거절');
INSERT INTO LECTURE VALUES ('L' || SEQ_LECTURE_ID.NEXTVAL, '정보보안', 45000, '해킹 방어', '강의설명6', 10, 100, 1, 'CAT6', 'inst6', 't6.jpg', 8, TO_DATE('2009-05-21','YYYY-MM-DD'), '0.0.5.1', 1, NULL);
INSERT INTO LECTURE VALUES ('L' || SEQ_LECTURE_ID.NEXTVAL, '데이터 분석', 50000, 'R 프로그래밍', '강의설명7', 15, 150, 1, 'CAT7', 'inst7', 't7.jpg', 25, TO_DATE('2022-04-07','YYYY-MM-DD'), '0.4.0.1', 1, NULL);
INSERT INTO LECTURE VALUES ('L' || SEQ_LECTURE_ID.NEXTVAL, 'AWS 클라우드', 80000, '인프라 구축', '강의설명8', 20, 200, 1, 'CAT8', 'inst8', 't8.jpg', 35, TO_DATE('2009-05-21','YYYY-MM-DD'), '0.0.5.1', 1, NULL);
INSERT INTO LECTURE VALUES ('L' || SEQ_LECTURE_ID.NEXTVAL, 'UI 디자인', 35000, '피그마 활용', '강의설명9', 10, 100, 0, 'CAT9', 'inst9', 't9.jpg', 22, TO_DATE('2022-04-07','YYYY-MM-DD'), '0.4.0.1', 1, NULL);
INSERT INTO LECTURE VALUES ('L' || SEQ_LECTURE_ID.NEXTVAL, '교양 철학', 20000, '생각하는 힘', '강의설명10', 8, 80, 1, 'CAT10', 'inst10', 't10.jpg', 0, TO_DATE('2022-04-07','YYYY-MM-DD'), '0.4.0.1', 1, NULL);

INSERT INTO RELATIVE_SKILL VALUES (SEQ_RELATIVE_SKILL_ID.NEXTVAL, 'Oracle SQL', 'L1');
INSERT INTO RELATIVE_SKILL VALUES (SEQ_RELATIVE_SKILL_ID.NEXTVAL, 'Java', 'L2');
INSERT INTO RELATIVE_SKILL VALUES (SEQ_RELATIVE_SKILL_ID.NEXTVAL, 'Python', 'L3');
INSERT INTO RELATIVE_SKILL VALUES (SEQ_RELATIVE_SKILL_ID.NEXTVAL, 'Flutter', 'L4');
INSERT INTO RELATIVE_SKILL VALUES (SEQ_RELATIVE_SKILL_ID.NEXTVAL, 'C#', 'L5');
INSERT INTO RELATIVE_SKILL VALUES (SEQ_RELATIVE_SKILL_ID.NEXTVAL, 'Network', 'L6');
INSERT INTO RELATIVE_SKILL VALUES (SEQ_RELATIVE_SKILL_ID.NEXTVAL, 'R', 'L7');
INSERT INTO RELATIVE_SKILL VALUES (SEQ_RELATIVE_SKILL_ID.NEXTVAL, 'AWS', 'L8');
INSERT INTO RELATIVE_SKILL VALUES (SEQ_RELATIVE_SKILL_ID.NEXTVAL, 'Figma', 'L9');
INSERT INTO RELATIVE_SKILL VALUES (SEQ_RELATIVE_SKILL_ID.NEXTVAL, 'Logic', 'L10');

INSERT INTO CHAPTER VALUES ('CH' || SEQ_CHAPTER_ID.NEXTVAL, 1, '인트로', 10, 'lect.ppt', TO_DATE('2026-05-09','YYYY-MM-DD'),'www.video1.com',TO_DATE('2026-05-09','YYYY-MM-DD'), 'L1');
INSERT INTO CHAPTER VALUES ('CH' || SEQ_CHAPTER_ID.NEXTVAL, 1, '자바설치', 15, 'lect.ppt',TO_DATE('2024-04-07','YYYY-MM-DD'), 'www.video2.com',TO_DATE('2025-05-09','YYYY-MM-DD'), 'L2');
INSERT INTO CHAPTER VALUES ('CH' || SEQ_CHAPTER_ID.NEXTVAL, 1, '파이썬 기초', 20,'lect.ppt',TO_DATE('2020-04-07','YYYY-MM-DD'), 'www.video3.com',TO_DATE('2026-05-09','YYYY-MM-DD'), 'L3');
INSERT INTO CHAPTER VALUES ('CH' || SEQ_CHAPTER_ID.NEXTVAL, 1, '다트 언어', 25,'lect.ppt',TO_DATE('2011-04-07','YYYY-MM-DD'), 'www.video4.com',TO_DATE('2025-03-09','YYYY-MM-DD'), 'L4');
INSERT INTO CHAPTER VALUES ('CH' || SEQ_CHAPTER_ID.NEXTVAL, 1, '유니티 설치', 30, 'lect.ppt',TO_DATE('2022-09-07','YYYY-MM-DD'),'www.video5.com',TO_DATE('2026-02-09','YYYY-MM-DD'), 'L5');
INSERT INTO CHAPTER VALUES ('CH' || SEQ_CHAPTER_ID.NEXTVAL, 1, '보안이란', 15,'lect.ppt',TO_DATE('2022-04-07','YYYY-MM-DD'), 'www.video6.com',TO_DATE('2023-02-09','YYYY-MM-DD'), 'L6');
INSERT INTO CHAPTER VALUES ('CH' || SEQ_CHAPTER_ID.NEXTVAL, 1, '통계 기초', 20,'lect.ppt',TO_DATE('2021-04-07','YYYY-MM-DD'), 'www.video7.com',TO_DATE('2021-05-09','YYYY-MM-DD'), 'L7');
INSERT INTO CHAPTER VALUES ('CH' || SEQ_CHAPTER_ID.NEXTVAL, 1, 'EC2 생성', 30,'lect.ppt',TO_DATE('2023-04-15','YYYY-MM-DD'), 'www.video8.com',TO_DATE('2015-05-09','YYYY-MM-DD'), 'L8');
INSERT INTO CHAPTER VALUES ('CH' || SEQ_CHAPTER_ID.NEXTVAL, 1, '도형 그리기', 20,'lect.ppt',TO_DATE('2020-02-17','YYYY-MM-DD'), 'www.video9.com',TO_DATE('2013-05-09','YYYY-MM-DD'), 'L9');
INSERT INTO CHAPTER VALUES ('CH' || SEQ_CHAPTER_ID.NEXTVAL, 1, '철학의 기원', 15,'lect.ppt',TO_DATE('2021-04-07','YYYY-MM-DD'), 'www.video10.com',TO_DATE('2015-05-09','YYYY-MM-DD'), 'L10');

-- [장바구니] 사용자별 2개씩 순차적으로 (u10 제외, L9 제외)
INSERT INTO MY_CART VALUES ('CART' || SEQ_MY_CART_ID.NEXTVAL, 'user1', 'L1');
INSERT INTO MY_CART VALUES ('CART' || SEQ_MY_CART_ID.NEXTVAL, 'user1', 'L2');
INSERT INTO MY_CART VALUES ('CART' || SEQ_MY_CART_ID.NEXTVAL, 'user2', 'L2');
INSERT INTO MY_CART VALUES ('CART' || SEQ_MY_CART_ID.NEXTVAL, 'user2', 'L3');
INSERT INTO MY_CART VALUES ('CART' || SEQ_MY_CART_ID.NEXTVAL, 'user3', 'L3');
INSERT INTO MY_CART VALUES ('CART' || SEQ_MY_CART_ID.NEXTVAL, 'user3', 'L4');
INSERT INTO MY_CART VALUES ('CART' || SEQ_MY_CART_ID.NEXTVAL, 'user4', 'L4');
INSERT INTO MY_CART VALUES ('CART' || SEQ_MY_CART_ID.NEXTVAL, 'user4', 'L5');
INSERT INTO MY_CART VALUES ('CART' || SEQ_MY_CART_ID.NEXTVAL, 'user5', 'L5');
INSERT INTO MY_CART VALUES ('CART' || SEQ_MY_CART_ID.NEXTVAL, 'user5', 'L6');
INSERT INTO MY_CART VALUES ('CART' || SEQ_MY_CART_ID.NEXTVAL, 'user6', 'L6');
INSERT INTO MY_CART VALUES ('CART' || SEQ_MY_CART_ID.NEXTVAL, 'user6', 'L7');
INSERT INTO MY_CART VALUES ('CART' || SEQ_MY_CART_ID.NEXTVAL, 'user7', 'L7');
INSERT INTO MY_CART VALUES ('CART' || SEQ_MY_CART_ID.NEXTVAL, 'user7', 'L8');
INSERT INTO MY_CART VALUES ('CART' || SEQ_MY_CART_ID.NEXTVAL, 'user8', 'L8'); -- L9 비활성으로 1개만
INSERT INTO MY_CART VALUES ('CART' || SEQ_MY_CART_ID.NEXTVAL, 'user9', 'L10'); -- L9 비활성으로 건너뜀

-- [결제 상세 ID 매핑] (PDn = userN으로 직관적 매칭)
INSERT INTO PAYMENT_DETAIL VALUES ('PD1', 'user1');
INSERT INTO PAYMENT_DETAIL VALUES ('PD2', 'user2');
INSERT INTO PAYMENT_DETAIL VALUES ('PD3', 'user3');
INSERT INTO PAYMENT_DETAIL VALUES ('PD4', 'user4');
INSERT INTO PAYMENT_DETAIL VALUES ('PD5', 'user5');
INSERT INTO PAYMENT_DETAIL VALUES ('PD6', 'user6');
INSERT INTO PAYMENT_DETAIL VALUES ('PD7', 'user7');
INSERT INTO PAYMENT_DETAIL VALUES ('PD8', 'user8');
INSERT INTO PAYMENT_DETAIL VALUES ('PD9', 'user9');
-- PD10은 User10이 비활성이므로 없음

-- PAYMENT (State=1: 구매완료)
INSERT INTO PAYMENT (PAY_ID, PAYREC_ID, METHOD, TIME, PRICE, STATE) VALUES ('P' || SEQ_PAYMENT_ID.NEXTVAL, 'PD1', 'CARD', SYSDATE, 95000, 1);
INSERT INTO PAYMENT (PAY_ID, PAYREC_ID, METHOD, TIME, PRICE, STATE) VALUES ('P' || SEQ_PAYMENT_ID.NEXTVAL, 'PD2', 'CARD', SYSDATE, 40000, 1);
INSERT INTO PAYMENT (PAY_ID, PAYREC_ID, METHOD, TIME, PRICE, STATE) VALUES ('P' || SEQ_PAYMENT_ID.NEXTVAL, 'PD3', 'CARD', SYSDATE, 55000, 1);
INSERT INTO PAYMENT (PAY_ID, PAYREC_ID, METHOD, TIME, PRICE, STATE) VALUES ('P' || SEQ_PAYMENT_ID.NEXTVAL, 'PD4', 'CASH', SYSDATE, 50000, 0); -- 장바구니
INSERT INTO PAYMENT (PAY_ID, PAYREC_ID, METHOD, TIME, PRICE, STATE) VALUES ('P' || SEQ_PAYMENT_ID.NEXTVAL, 'PD5', 'CARD', SYSDATE, 80000, 1);
INSERT INTO PAYMENT (PAY_ID, PAYREC_ID, METHOD, TIME, PRICE, STATE) VALUES ('P' || SEQ_PAYMENT_ID.NEXTVAL, 'PD6', 'CASH', SYSDATE, 90000, 1);
INSERT INTO PAYMENT (PAY_ID, PAYREC_ID, METHOD, TIME, PRICE, STATE) VALUES ('P' || SEQ_PAYMENT_ID.NEXTVAL, 'PD7', 'BANK', SYSDATE, 45000, 0);
INSERT INTO PAYMENT (PAY_ID, PAYREC_ID, METHOD, TIME, PRICE, STATE) VALUES ('P' || SEQ_PAYMENT_ID.NEXTVAL, 'PD8', 'BANK', SYSDATE, 20000, 1);
INSERT INTO PAYMENT (PAY_ID, PAYREC_ID, METHOD, TIME, PRICE, STATE) VALUES ('P' || SEQ_PAYMENT_ID.NEXTVAL, 'PD9', 'CARD', SYSDATE, 35000, 1);

-- PAYMENT_DETAIL2
-- [구매 내역] (User별 요청사항 반영: L9 제외, 순환 구조)
INSERT INTO PAYMENT_DETAIL2(LECT_ID, PAYREC_ID) VALUES ('L3','PD1'); -- u1
INSERT INTO PAYMENT_DETAIL2(LECT_ID, PAYREC_ID) VALUES ('L4','PD1'); -- u1
INSERT INTO PAYMENT_DETAIL2(LECT_ID, PAYREC_ID) VALUES ('L4','PD2'); -- u2
INSERT INTO PAYMENT_DETAIL2(LECT_ID, PAYREC_ID) VALUES ('L5','PD2'); -- u2
INSERT INTO PAYMENT_DETAIL2(LECT_ID, PAYREC_ID) VALUES ('L5','PD3'); -- u3
INSERT INTO PAYMENT_DETAIL2(LECT_ID, PAYREC_ID) VALUES ('L6','PD3'); -- u3
INSERT INTO PAYMENT_DETAIL2(LECT_ID, PAYREC_ID) VALUES ('L6','PD4'); -- u4
INSERT INTO PAYMENT_DETAIL2(LECT_ID, PAYREC_ID) VALUES ('L7','PD4'); -- u4
INSERT INTO PAYMENT_DETAIL2(LECT_ID, PAYREC_ID) VALUES ('L7','PD5'); -- u5
INSERT INTO PAYMENT_DETAIL2(LECT_ID, PAYREC_ID) VALUES ('L8','PD5'); -- u5
INSERT INTO PAYMENT_DETAIL2(LECT_ID, PAYREC_ID) VALUES ('L8','PD6'); -- u6 (L9 제외)
INSERT INTO PAYMENT_DETAIL2(LECT_ID, PAYREC_ID) VALUES ('L10','PD7'); -- u7 (L9 제외)
INSERT INTO PAYMENT_DETAIL2(LECT_ID, PAYREC_ID) VALUES ('L10','PD8'); -- u8
INSERT INTO PAYMENT_DETAIL2(LECT_ID, PAYREC_ID) VALUES ('L1','PD8');  -- u8
INSERT INTO PAYMENT_DETAIL2(LECT_ID, PAYREC_ID) VALUES ('L1','PD9');  -- u9
INSERT INTO PAYMENT_DETAIL2(LECT_ID, PAYREC_ID) VALUES ('L2','PD9');  -- u9



-- MY_LECTURE (자동 동기화 - 이제 무조건 뜹니다)
-- [수정] 결제 완료(STATE = 1)인 것만 내 강의실에 등록
INSERT INTO MY_LECTURE (MYLECT_ID, LECT_ID, USER_ID, REGDATE)
SELECT 'ML' || SEQ_MY_LECTURE_ID.NEXTVAL, pd2.LECT_ID, pd.USER_ID, SYSDATE
FROM PAYMENT_DETAIL2 pd2
JOIN PAYMENT_DETAIL pd ON pd2.PAYREC_ID = pd.PAYREC_ID
JOIN PAYMENT p ON pd.PAYREC_ID = p.PAYREC_ID
WHERE p.STATE = 1; -- 반드시 결제 완료(1)된 것만!

-- [추가] 이미 내 강의실(수강 중)에 있는 강의가 장바구니에 있다면 삭제
DELETE FROM MY_CART
WHERE (USER_ID, LECT_ID) IN (
    SELECT USER_ID, LECT_ID FROM MY_LECTURE
);



-- MY_CHAPTER
INSERT INTO MY_CHAPTER VALUES ('MC' || SEQ_MY_CHAPTER_ID.NEXTVAL, 'CH1', 'user1', SYSDATE, 50, 50, 0);
INSERT INTO MY_CHAPTER VALUES ('MC' || SEQ_MY_CHAPTER_ID.NEXTVAL, 'CH2', 'user2', SYSDATE, 100, 150, 1);
INSERT INTO MY_CHAPTER VALUES ('MC' || SEQ_MY_CHAPTER_ID.NEXTVAL, 'CH3', 'user3', SYSDATE, 20, 40, 0);
INSERT INTO MY_CHAPTER VALUES ('MC' || SEQ_MY_CHAPTER_ID.NEXTVAL, 'CH4', 'user4', SYSDATE, 80, 200, 0);
INSERT INTO MY_CHAPTER VALUES ('MC' || SEQ_MY_CHAPTER_ID.NEXTVAL, 'CH5', 'user5', SYSDATE, 100, 300, 1);
INSERT INTO MY_CHAPTER VALUES ('MC' || SEQ_MY_CHAPTER_ID.NEXTVAL, 'CH6', 'user6', SYSDATE, 10, 20, 0);
INSERT INTO MY_CHAPTER VALUES ('MC' || SEQ_MY_CHAPTER_ID.NEXTVAL, 'CH7', 'user7', SYSDATE, 60, 120, 0);
INSERT INTO MY_CHAPTER VALUES ('MC' || SEQ_MY_CHAPTER_ID.NEXTVAL, 'CH8', 'user8', SYSDATE, 100, 300, 1);
INSERT INTO MY_CHAPTER VALUES ('MC' || SEQ_MY_CHAPTER_ID.NEXTVAL, 'CH9', 'user9', SYSDATE, 40, 80, 0);
--INSERT INTO MY_CHAPTER VALUES ('MC' || SEQ_MY_CHAPTER_ID.NEXTVAL, 'CH10', 'user10', SYSDATE, 100, 150, 1);
--U10은 비활성화이므로 제외

INSERT INTO QUESTION (QUESTION_ID, LECT_ID, USER_ID, TITLE, CONTENT,VIEWS,REGDATE,REGIP,ANS,ANSDATE,ANSIP)
VALUES ('Q' || SEQ_QUESTION_ID.NEXTVAL, 'L1', 'user1', '질문입니다1', 'SQL 내용문의',1500, SYSDATE, '0.0.0.1','문의답변이에요',SYSDATE,'0.0.0.0');
INSERT INTO QUESTION (QUESTION_ID, LECT_ID, USER_ID, TITLE, CONTENT,VIEWS,REGDATE,REGIP,ANS,ANSDATE,ANSIP)
VALUES ('Q' || SEQ_QUESTION_ID.NEXTVAL, 'L2', 'user2', '질문입니다2', 'Java 문법문의',1500, SYSDATE, '0.0.0.1','문의답변이에요',SYSDATE,'0.0.0.0');
INSERT INTO QUESTION (QUESTION_ID, LECT_ID, USER_ID, TITLE, CONTENT,VIEWS,REGDATE,REGIP,ANS,ANSDATE,ANSIP)
VALUES ('Q' || SEQ_QUESTION_ID.NEXTVAL, 'L3', 'user3', '질문입니다3', 'AI 실습오류',1500, SYSDATE, '0.0.0.1','문의답변이에요',SYSDATE,'0.0.0.0');
INSERT INTO QUESTION (QUESTION_ID, LECT_ID, USER_ID, TITLE, CONTENT,VIEWS,REGDATE,REGIP,ANS,ANSDATE,ANSIP)
VALUES ('Q' || SEQ_QUESTION_ID.NEXTVAL, 'L4', 'user4', '질문입니다4', '앱 빌드에러',1500, SYSDATE, '0.0.0.1','문의답변이에요',SYSDATE,'0.0.0.0');
INSERT INTO QUESTION (QUESTION_ID, LECT_ID, USER_ID, TITLE, CONTENT,VIEWS,REGDATE,REGIP,ANS,ANSDATE,ANSIP)
VALUES ('Q' || SEQ_QUESTION_ID.NEXTVAL, 'L5', 'user5', '질문입니다5', '유니티 라이선스',1500, SYSDATE, '0.0.0.1','문의답변이에요',SYSDATE,'0.0.0.0');
INSERT INTO QUESTION (QUESTION_ID, LECT_ID, USER_ID, TITLE, CONTENT,VIEWS,REGDATE,REGIP)
VALUES ('Q' || SEQ_QUESTION_ID.NEXTVAL, 'L6', 'user6', '질문입니다6', '보안 설정문의',1500, SYSDATE, '0.0.0.1');
INSERT INTO QUESTION (QUESTION_ID, LECT_ID, USER_ID, TITLE, CONTENT,VIEWS,REGDATE,REGIP)
VALUES ('Q' || SEQ_QUESTION_ID.NEXTVAL, 'L7', 'user7', '질문입니다7', '데이터 시각화',1500, SYSDATE, '0.0.0.1');
INSERT INTO QUESTION (QUESTION_ID, LECT_ID, USER_ID, TITLE, CONTENT,VIEWS,REGDATE,REGIP,ANS,ANSDATE,ANSIP)
VALUES ('Q' || SEQ_QUESTION_ID.NEXTVAL, 'L8', 'user8', '질문입니다8', '클라우드 과금',1500, SYSDATE, '0.0.0.1','문의답변이에요',SYSDATE,'0.0.0.0');
INSERT INTO QUESTION (QUESTION_ID, LECT_ID, USER_ID, TITLE, CONTENT,VIEWS,REGDATE,REGIP,ANS,ANSDATE,ANSIP)
VALUES ('Q' || SEQ_QUESTION_ID.NEXTVAL, 'L9', 'user9', '질문입니다9', '피그마 단축키',1500, SYSDATE, '0.0.0.1','문의답변이에요',SYSDATE,'0.0.0.0');
INSERT INTO QUESTION (QUESTION_ID, LECT_ID, USER_ID, TITLE, CONTENT,VIEWS,REGDATE,REGIP,ANS,ANSDATE,ANSIP)
VALUES ('Q' || SEQ_QUESTION_ID.NEXTVAL, 'L10', 'user10', '질문입니다10', '철학 과제문의',1500, SYSDATE, '0.0.0.1','문의답변이에요',SYSDATE,'0.0.0.0');



INSERT INTO REVIEW (REVIEW_ID, SCORE, CONTENT,REGDATE,REGIP, LECT_ID, USER_ID)
VALUES ('R' || SEQ_REVIEW_ID.NEXTVAL, 5, '좋아요',SYSDATE,'0.0.0.1', 'L1', 'user1');
INSERT INTO REVIEW (REVIEW_ID, SCORE, CONTENT,REGDATE,REGIP, LECT_ID, USER_ID)
VALUES ('R' || SEQ_REVIEW_ID.NEXTVAL, 4, '유익함',SYSDATE,'0.0.0.1', 'L2', 'user2');
INSERT INTO REVIEW (REVIEW_ID, SCORE, CONTENT,REGDATE,REGIP, LECT_ID, USER_ID)
VALUES ('R' || SEQ_REVIEW_ID.NEXTVAL, 5, '최고의 강의',SYSDATE,'0.0.0.1', 'L3', 'user3');
INSERT INTO REVIEW (REVIEW_ID, SCORE, CONTENT,REGDATE,REGIP, LECT_ID, USER_ID)
VALUES ('R' || SEQ_REVIEW_ID.NEXTVAL, 3, '그저 그래요',SYSDATE,'0.0.0.1', 'L4', 'user4');
INSERT INTO REVIEW (REVIEW_ID, SCORE, CONTENT,REGDATE,REGIP, LECT_ID, USER_ID)
VALUES ('R' || SEQ_REVIEW_ID.NEXTVAL, 5, '완벽합니다',SYSDATE,'0.0.0.1', 'L5', 'user5');
INSERT INTO REVIEW (REVIEW_ID, SCORE, CONTENT,REGDATE,REGIP, LECT_ID, USER_ID)
VALUES ('R' || SEQ_REVIEW_ID.NEXTVAL, 4, '추천해요', SYSDATE,'0.0.0.1','L6', 'user6');
INSERT INTO REVIEW (REVIEW_ID, SCORE, CONTENT,REGDATE,REGIP, LECT_ID, USER_ID)
VALUES ('R' || SEQ_REVIEW_ID.NEXTVAL, 5, '감동적인 강의',SYSDATE,'0.0.0.1', 'L7', 'user7');
INSERT INTO REVIEW (REVIEW_ID, SCORE, CONTENT,REGDATE,REGIP, LECT_ID, USER_ID)
VALUES ('R' || SEQ_REVIEW_ID.NEXTVAL, 2, '어려워요',SYSDATE,'0.0.0.1', 'L8', 'user8');
INSERT INTO REVIEW (REVIEW_ID, SCORE, CONTENT,REGDATE,REGIP, LECT_ID, USER_ID)
VALUES ('R' || SEQ_REVIEW_ID.NEXTVAL, 5, '실무에 도움됨',SYSDATE,'0.0.0.1', 'L9', 'user9');
INSERT INTO REVIEW (REVIEW_ID, SCORE, CONTENT,REGDATE,REGIP, LECT_ID, USER_ID)
VALUES ('R' || SEQ_REVIEW_ID.NEXTVAL, 4, '괜찮네요',SYSDATE,'0.0.0.1', 'L10', 'user10');


INSERT INTO TEST VALUES ('T' || SEQ_TEST_ID.NEXTVAL, 'L1');
INSERT INTO TEST VALUES ('T' || SEQ_TEST_ID.NEXTVAL, 'L2');
INSERT INTO TEST VALUES ('T' || SEQ_TEST_ID.NEXTVAL, 'L3');
INSERT INTO TEST VALUES ('T' || SEQ_TEST_ID.NEXTVAL, 'L4');
INSERT INTO TEST VALUES ('T' || SEQ_TEST_ID.NEXTVAL, 'L5');
INSERT INTO TEST VALUES ('T' || SEQ_TEST_ID.NEXTVAL, 'L6');
INSERT INTO TEST VALUES ('T' || SEQ_TEST_ID.NEXTVAL, 'L7');
INSERT INTO TEST VALUES ('T' || SEQ_TEST_ID.NEXTVAL, 'L8');
INSERT INTO TEST VALUES ('T' || SEQ_TEST_ID.NEXTVAL, 'L9');
INSERT INTO TEST VALUES ('T' || SEQ_TEST_ID.NEXTVAL, 'L10');



INSERT INTO TEST_QUESTION VALUES ('TQ' || SEQ_TEST_QUESTION_ID.NEXTVAL, 'T1', 1, 'SQL이란?', '1번 문제', '2번 문제', '3번 문제', '4번 문제', 3, '해설1');
INSERT INTO TEST_QUESTION VALUES ('TQ' || SEQ_TEST_QUESTION_ID.NEXTVAL, 'T1', 2, 'SELECT 용도?', '1번 문제', '2번 문제', '3번 문제', '4번 문제', 2, '해설2');
INSERT INTO TEST_QUESTION VALUES ('TQ' || SEQ_TEST_QUESTION_ID.NEXTVAL, 'T1', 3, 'DROP 용도?', '1번 문제', '2번 문제', '3번 문제', '4번 문제', 4, '해설3');
INSERT INTO TEST_QUESTION VALUES ('TQ' || SEQ_TEST_QUESTION_ID.NEXTVAL, 'T1', 4, 'INSERT 용도?', '1번 문제', '2번 문제', '3번 문제', '4번 문제', 2, '해설4');
INSERT INTO TEST_QUESTION VALUES ('TQ' || SEQ_TEST_QUESTION_ID.NEXTVAL, 'T1', 5, 'PK 특징?', '1번 문제', '2번 문제', '3번 문제', '4번 문제', 1, '해설5');


INSERT INTO MY_TEST (MY_TEST_ID, TEST_ID, USER_ID, SCORE, TAKEDATE, IP) VALUES ('MT' || SEQ_MY_TEST_ID.NEXTVAL, 'T1', 'user1', 80, SYSDATE, '0.8.5.3');
INSERT INTO MY_TEST (MY_TEST_ID, TEST_ID, USER_ID, SCORE, TAKEDATE, IP) VALUES ('MT' || SEQ_MY_TEST_ID.NEXTVAL, 'T1', 'user2', 100, SYSDATE, '3.5.5.3');
INSERT INTO MY_TEST (MY_TEST_ID, TEST_ID, USER_ID, SCORE, TAKEDATE, IP) VALUES ('MT' || SEQ_MY_TEST_ID.NEXTVAL, 'T1', 'user3', 40, SYSDATE, '2.4.5.3');
INSERT INTO MY_TEST (MY_TEST_ID, TEST_ID, USER_ID, SCORE, TAKEDATE, IP) VALUES ('MT' || SEQ_MY_TEST_ID.NEXTVAL, 'T1', 'user4', 90, SYSDATE, '1.5.5.3');
INSERT INTO MY_TEST (MY_TEST_ID, TEST_ID, USER_ID, SCORE, TAKEDATE, IP) VALUES ('MT' || SEQ_MY_TEST_ID.NEXTVAL, 'T1', 'user5', 70, SYSDATE, '0.2.5.3');
INSERT INTO MY_TEST (MY_TEST_ID, TEST_ID, USER_ID, SCORE, TAKEDATE, IP) VALUES ('MT' || SEQ_MY_TEST_ID.NEXTVAL, 'T6', 'user6', 60, SYSDATE, '0.8.5.3');
INSERT INTO MY_TEST (MY_TEST_ID, TEST_ID, USER_ID, SCORE, TAKEDATE, IP) VALUES ('MT' || SEQ_MY_TEST_ID.NEXTVAL, 'T7', 'user7', 85, SYSDATE, '0.2.5.3');
INSERT INTO MY_TEST (MY_TEST_ID, TEST_ID, USER_ID, SCORE, TAKEDATE, IP) VALUES ('MT' || SEQ_MY_TEST_ID.NEXTVAL, 'T8', 'user8', 100, SYSDATE, '0.4.5.4');
INSERT INTO MY_TEST (MY_TEST_ID, TEST_ID, USER_ID, SCORE, TAKEDATE, IP) VALUES ('MT' || SEQ_MY_TEST_ID.NEXTVAL, 'T9', 'user9', 30, SYSDATE, '0.8.5.3');
INSERT INTO MY_TEST (MY_TEST_ID, TEST_ID, USER_ID, SCORE, TAKEDATE, IP) VALUES ('MT' || SEQ_MY_TEST_ID.NEXTVAL, 'T10', 'user10', 95, SYSDATE, '0.2.5.3');



INSERT INTO TEST_EXAMINATION VALUES (1, 'MT1', 3);
INSERT INTO TEST_EXAMINATION VALUES (2, 'MT1', 2);
INSERT INTO TEST_EXAMINATION VALUES (3, 'MT1', 1);
INSERT INTO TEST_EXAMINATION VALUES (4, 'MT1', 2);
INSERT INTO TEST_EXAMINATION VALUES (5, 'MT1', 1);
INSERT INTO TEST_EXAMINATION VALUES (1, 'MT2', 3);
INSERT INTO TEST_EXAMINATION VALUES (2, 'MT2', 2);
INSERT INTO TEST_EXAMINATION VALUES (3, 'MT2', 4);
INSERT INTO TEST_EXAMINATION VALUES (4, 'MT2', 2);
INSERT INTO TEST_EXAMINATION VALUES (5, 'MT2', 1);




-- [대시보드 데이터 보강] User1의 오늘 출석 추가
INSERT INTO ATTENDANCE (ATTEND_ID, USER_ID,ATTDATE) VALUES (SEQ_ATTENDANCE_ID.NEXTVAL, 'user1',SYSDATE);
INSERT INTO ATTENDANCE (ATTEND_ID, USER_ID,ATTDATE) VALUES (SEQ_ATTENDANCE_ID.NEXTVAL, 'user2',TO_DATE('2026-01-15','YYYY-MM-DD'));
INSERT INTO ATTENDANCE (ATTEND_ID, USER_ID,ATTDATE) VALUES (SEQ_ATTENDANCE_ID.NEXTVAL, 'user3',TO_DATE('2026-01-13','YYYY-MM-DD'));
INSERT INTO ATTENDANCE (ATTEND_ID, USER_ID,ATTDATE) VALUES (SEQ_ATTENDANCE_ID.NEXTVAL, 'user4',SYSDATE);
INSERT INTO ATTENDANCE (ATTEND_ID, USER_ID,ATTDATE) VALUES (SEQ_ATTENDANCE_ID.NEXTVAL, 'user5',TO_DATE('2026-01-11','YYYY-MM-DD'));
INSERT INTO ATTENDANCE (ATTEND_ID, USER_ID,ATTDATE) VALUES (SEQ_ATTENDANCE_ID.NEXTVAL, 'user6',SYSDATE);
INSERT INTO ATTENDANCE (ATTEND_ID, USER_ID,ATTDATE) VALUES (SEQ_ATTENDANCE_ID.NEXTVAL, 'user7',TO_DATE('2026-01-07','YYYY-MM-DD'));
INSERT INTO ATTENDANCE (ATTEND_ID, USER_ID,ATTDATE) VALUES (SEQ_ATTENDANCE_ID.NEXTVAL, 'user8',SYSDATE);
INSERT INTO ATTENDANCE (ATTEND_ID, USER_ID,ATTDATE) VALUES (SEQ_ATTENDANCE_ID.NEXTVAL, 'user9',TO_DATE('2026-01-12','YYYY-MM-DD'));
INSERT INTO ATTENDANCE (ATTEND_ID, USER_ID,ATTDATE) VALUES (SEQ_ATTENDANCE_ID.NEXTVAL, 'user10',SYSDATE);


INSERT INTO ANNOUNCEMENT (ANN_ID, TITLE, CONTENT,VIEWS,REGDATE,REGIP, ADM_ID)
VALUES (SEQ_ANNOUNCEMENT_ID.NEXTVAL, '점검공지', '서비스 점검 안내',90,SYSDATE,'0.0.0.1', 'admin1');
INSERT INTO ANNOUNCEMENT (ANN_ID, TITLE, CONTENT,VIEWS,REGDATE,REGIP, ADM_ID)
VALUES (SEQ_ANNOUNCEMENT_ID.NEXTVAL, '이벤트', '신규 가입 이벤트',155,SYSDATE,'0.0.0.1', 'admin2');
INSERT INTO ANNOUNCEMENT (ANN_ID, TITLE, CONTENT,VIEWS,REGDATE,REGIP, ADM_ID)
VALUES (SEQ_ANNOUNCEMENT_ID.NEXTVAL, '업데이트', '신규 기능 추가',999,SYSDATE,'0.0.0.1', 'admin3');
INSERT INTO ANNOUNCEMENT (ANN_ID, TITLE, CONTENT,VIEWS,REGDATE,REGIP, ADM_ID)
VALUES (SEQ_ANNOUNCEMENT_ID.NEXTVAL, '공지사항', '개인정보처리방침 변경',8766,SYSDATE,'0.0.0.1', 'admin1');
INSERT INTO ANNOUNCEMENT (ANN_ID, TITLE, CONTENT,VIEWS,REGDATE,REGIP, ADM_ID)
VALUES (SEQ_ANNOUNCEMENT_ID.NEXTVAL, '안내', '강사 모집 안내',4676,SYSDATE,'0.0.0.1', 'admin4');
INSERT INTO ANNOUNCEMENT (ANN_ID, TITLE, CONTENT,VIEWS,REGDATE,REGIP, ADM_ID)
VALUES (SEQ_ANNOUNCEMENT_ID.NEXTVAL, '긴급', '서버 접속 장애 안내',125,SYSDATE,'0.0.0.1', 'admin1');
INSERT INTO ANNOUNCEMENT (ANN_ID, TITLE, CONTENT,VIEWS,REGDATE,REGIP, ADM_ID)
VALUES (SEQ_ANNOUNCEMENT_ID.NEXTVAL, '이벤트 종료', '할인 기간 종료 안내',12,SYSDATE,'0.0.0.1', 'admin2');
INSERT INTO ANNOUNCEMENT (ANN_ID, TITLE, CONTENT,VIEWS,REGDATE,REGIP, ADM_ID)
VALUES (SEQ_ANNOUNCEMENT_ID.NEXTVAL, '필독', '커뮤니티 이용 규칙',455,SYSDATE,'0.0.0.1', 'admin3');
INSERT INTO ANNOUNCEMENT (ANN_ID, TITLE, CONTENT,VIEWS,REGDATE,REGIP, ADM_ID)
VALUES (SEQ_ANNOUNCEMENT_ID.NEXTVAL, '점검 완료', '점검이 완료되었습니다',22,SYSDATE,'0.0.0.1', 'admin1');
INSERT INTO ANNOUNCEMENT (ANN_ID, TITLE, CONTENT,VIEWS,REGDATE,REGIP, ADM_ID)
VALUES (SEQ_ANNOUNCEMENT_ID.NEXTVAL, '기타', '고객센터 운영 시간 안내',15,SYSDATE,'0.0.0.1', 'admin5');



INSERT INTO TRANSMISSION_HISTORY (TRANS_ID, PHONE, EMAIL) VALUES (SEQ_TRANS_ID.NEXTVAL, '01011112222', 't1@test.com');
INSERT INTO TRANSMISSION_HISTORY (TRANS_ID, PHONE, EMAIL) VALUES (SEQ_TRANS_ID.NEXTVAL, '01011112223', 't2@test.com');
INSERT INTO TRANSMISSION_HISTORY (TRANS_ID, PHONE, EMAIL) VALUES (SEQ_TRANS_ID.NEXTVAL, '01011112224', 't3@test.com');
INSERT INTO TRANSMISSION_HISTORY (TRANS_ID, PHONE, EMAIL) VALUES (SEQ_TRANS_ID.NEXTVAL, '01011112225', 't4@test.com');
INSERT INTO TRANSMISSION_HISTORY (TRANS_ID, PHONE, EMAIL) VALUES (SEQ_TRANS_ID.NEXTVAL, '01011112226', 't5@test.com');
INSERT INTO TRANSMISSION_HISTORY (TRANS_ID, PHONE, EMAIL) VALUES (SEQ_TRANS_ID.NEXTVAL, '01011112227', 't6@test.com');
INSERT INTO TRANSMISSION_HISTORY (TRANS_ID, PHONE, EMAIL) VALUES (SEQ_TRANS_ID.NEXTVAL, '01011112228', 't7@test.com');
INSERT INTO TRANSMISSION_HISTORY (TRANS_ID, PHONE, EMAIL) VALUES (SEQ_TRANS_ID.NEXTVAL, '01011112229', 't8@test.com');
INSERT INTO TRANSMISSION_HISTORY (TRANS_ID, PHONE, EMAIL) VALUES (SEQ_TRANS_ID.NEXTVAL, '01011112230', 't9@test.com');
INSERT INTO TRANSMISSION_HISTORY (TRANS_ID, PHONE, EMAIL) VALUES (SEQ_TRANS_ID.NEXTVAL, '01011112231', 't10@test.com');


COMMIT;


-----------------------select문-------------------------

SELECT
    i.NAME AS "강사명",
    l.NAME AS "강의명",
    -- 결제 상태(STATE)가 2(완료)인 것만 카운트
    COUNT(CASE WHEN p.STATE = 2 THEN 1 END) AS "결제건수(수강생수)",
    -- 강의 정가 * 결제 완료 건수 = 예상 매출액
    SUM(CASE WHEN p.STATE = 2 THEN l.PRICE ELSE 0 END) AS "총매출액"
FROM LECTURE l
JOIN INSTRUCTOR i ON l.INST_ID = i.INST_ID
-- 강의에 연결된 결제 상세 내역 조회 (없어도 강의는 떠야 하므로 LEFT JOIN)
LEFT JOIN PAYMENT_DETAIL2 pd2 ON l.LECT_ID = pd2.LECT_ID
-- 상세 내역에 연결된 결제 원장 조회 (상태값 확인용)
LEFT JOIN PAYMENT p ON pd2.PAYREC_ID = p.PAYREC_ID
GROUP BY i.NAME, l.NAME
ORDER BY i.NAME, l.NAME;


SELECT
    u.NAME AS "사용자명",
    u.USER_ID AS "아이디",
    l.NAME AS "장바구니에_담은_강의",
    l.PRICE AS "가격",
    i.NAME AS "강사명"
FROM MY_CART c
JOIN USERS u ON c.USER_ID = u.USER_ID
JOIN LECTURE l ON c.LECT_ID = l.LECT_ID
JOIN INSTRUCTOR i ON l.INST_ID = i.INST_ID
ORDER BY u.USER_ID, l.NAME;
